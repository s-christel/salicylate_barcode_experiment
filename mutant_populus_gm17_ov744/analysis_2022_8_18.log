mkdir R2
mv *_R2_* R2/
//bartender uses only one read

for f in *.fastq; do echo $f >> read_numbers.txt; less $f | grep "@" | wc -l >> read_numbers.txt; done
//take read numbers from txt and add to meta_samples.csv

//BARTENDER analysis (https://github.com/LaoZZZZZ/bartender-1.1)
for f in *.fastq; do bartender_extractor_com -f $f -o $(basename $f .fastq).extract -p TCTCT[20]CGTAC -d both -q ?; printf "\n\n"; done &> bartender_extractor.log

for f in *extract_barcode.txt; do bartender_single_com -f $f -o $(basename $f _barcode.txt).cluster; printf "\n\n"; done &> bartender_single_com.log

mkdir extracts
mv *.txt extracts/
mv *_barcode.csv extracts/

//in the following be sure to list parameters in the order of the samples! i.e. 1,2,3,... not 1,10,2,... and DO NOT USE SPACES BETWEEN THE FILES, ONLY COMMAS
bartender_combiner_com -f 109_R1_001.extract.cluster_cluster.csv,109_R1_001.extract.cluster_quality.csv,110_R1_001.extract.cluster_cluster.csv,110_R1_001.extract.cluster_quality.csv,111_R1_001.extract.cluster_cluster.csv,111_R1_001.extract.cluster_quality.csv,112_R1_001.extract.cluster_cluster.csv,112_R1_001.extract.cluster_quality.csv,113_R1_001.extract.cluster_cluster.csv,113_R1_001.extract.cluster_quality.csv,114_R1_001.extract.cluster_cluster.csv,114_R1_001.extract.cluster_quality.csv,115_R1_001.extract.cluster_cluster.csv,115_R1_001.extract.cluster_quality.csv,116_R1_001.extract.cluster_cluster.csv,116_R1_001.extract.cluster_quality.csv,117_R1_001.extract.cluster_cluster.csv,117_R1_001.extract.cluster_quality.csv,118_R1_001.extract.cluster_cluster.csv,118_R1_001.extract.cluster_quality.csv,119_R1_001.extract.cluster_cluster.csv,119_R1_001.extract.cluster_quality.csv,120_R1_001.extract.cluster_cluster.csv,120_R1_001.extract.cluster_quality.csv,121_R1_001.extract.cluster_cluster.csv,121_R1_001.extract.cluster_quality.csv,122_R1_001.extract.cluster_cluster.csv,122_R1_001.extract.cluster_quality.csv,123_R1_001.extract.cluster_cluster.csv,123_R1_001.extract.cluster_quality.csv,124_R1_001.extract.cluster_cluster.csv,124_R1_001.extract.cluster_quality.csv,125_R1_001.extract.cluster_cluster.csv,125_R1_001.extract.cluster_quality.csv,126_R1_001.extract.cluster_cluster.csv,126_R1_001.extract.cluster_quality.csv,127_R1_001.extract.cluster_cluster.csv,127_R1_001.extract.cluster_quality.csv,128_R1_001.extract.cluster_cluster.csv,128_R1_001.extract.cluster_quality.csv,129_R1_001.extract.cluster_cluster.csv,129_R1_001.extract.cluster_quality.csv,130_R1_001.extract.cluster_cluster.csv,130_R1_001.extract.cluster_quality.csv,131_R1_001.extract.cluster_cluster.csv,131_R1_001.extract.cluster_quality.csv,132_R1_001.extract.cluster_cluster.csv,132_R1_001.extract.cluster_quality.csv,133_R1_001.extract.cluster_cluster.csv,133_R1_001.extract.cluster_quality.csv,134_R1_001.extract.cluster_cluster.csv,134_R1_001.extract.cluster_quality.csv,135_R1_001.extract.cluster_cluster.csv,135_R1_001.extract.cluster_quality.csv,136_R1_001.extract.cluster_cluster.csv,136_R1_001.extract.cluster_quality.csv,137_R1_001.extract.cluster_cluster.csv,137_R1_001.extract.cluster_quality.csv,138_R1_001.extract.cluster_cluster.csv,138_R1_001.extract.cluster_quality.csv,139_R1_001.extract.cluster_cluster.csv,139_R1_001.extract.cluster_quality.csv,140_R1_001.extract.cluster_cluster.csv,140_R1_001.extract.cluster_quality.csv,141_R1_001.extract.cluster_cluster.csv,141_R1_001.extract.cluster_quality.csv,142_R1_001.extract.cluster_cluster.csv,142_R1_001.extract.cluster_quality.csv,143_R1_001.extract.cluster_cluster.csv,143_R1_001.extract.cluster_quality.csv,144_R1_001.extract.cluster_cluster.csv,144_R1_001.extract.cluster_quality.csv,148_R1_001.extract.cluster_cluster.csv,148_R1_001.extract.cluster_quality.csv -o oe22_gm17_ov744 -c 1 &> bartender_combiner.log
