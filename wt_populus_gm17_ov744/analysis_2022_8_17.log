mkdir R2
mv *_R2_* R2/
//bartender uses only one read

for f in *.fastq; do echo $f >> read_numbers.txt; less $f | grep "@" | wc -l >> read_numbers.txt; done
//take read numbers from txt and add to meta_samples.csv

//BARTENDER analysis (https://github.com/LaoZZZZZ/bartender-1.1)
for f in *.fastq; do bartender_extractor_com -f $f -o $(basename $f .fastq).extract -p TCTCT[20]CGTAC -d both -q ?; printf "\n\n"; done &> bartender_extractor.log

for f in *extract_barcode.txt; do bartender_single_com -f $f -o $(basename $f _barcode.txt).cluster; printf "\n\n"; done &> bartender_single_com.log

mkdir extracts
mv *.txt extracts/
mv *_barcode.csv extracts/

//in the following be sure to list parameters in the order of the samples! i.e. 1,2,3,... not 1,10,2,... and DO NOT USE SPACES BETWEEN THE FILES, ONLY COMMAS
bartender_combiner_com -f 073_R1_001.extract.cluster_cluster.csv,073_R1_001.extract.cluster_quality.csv,074_R1_001.extract.cluster_cluster.csv,074_R1_001.extract.cluster_quality.csv,075_R1_001.extract.cluster_cluster.csv,075_R1_001.extract.cluster_quality.csv,076_R1_001.extract.cluster_cluster.csv,076_R1_001.extract.cluster_quality.csv,077_R1_001.extract.cluster_cluster.csv,077_R1_001.extract.cluster_quality.csv,078_R1_001.extract.cluster_cluster.csv,078_R1_001.extract.cluster_quality.csv,079_R1_001.extract.cluster_cluster.csv,079_R1_001.extract.cluster_quality.csv,080_R1_001.extract.cluster_cluster.csv,080_R1_001.extract.cluster_quality.csv,081_R1_001.extract.cluster_cluster.csv,081_R1_001.extract.cluster_quality.csv,082_R1_001.extract.cluster_cluster.csv,082_R1_001.extract.cluster_quality.csv,083_R1_001.extract.cluster_cluster.csv,083_R1_001.extract.cluster_quality.csv,084_R1_001.extract.cluster_cluster.csv,084_R1_001.extract.cluster_quality.csv,085_R1_001.extract.cluster_cluster.csv,085_R1_001.extract.cluster_quality.csv,086_R1_001.extract.cluster_cluster.csv,086_R1_001.extract.cluster_quality.csv,087_R1_001.extract.cluster_cluster.csv,087_R1_001.extract.cluster_quality.csv,088_R1_001.extract.cluster_cluster.csv,088_R1_001.extract.cluster_quality.csv,089_R1_001.extract.cluster_cluster.csv,089_R1_001.extract.cluster_quality.csv,090_R1_001.extract.cluster_cluster.csv,090_R1_001.extract.cluster_quality.csv,091_R1_001.extract.cluster_cluster.csv,091_R1_001.extract.cluster_quality.csv,092_R1_001.extract.cluster_cluster.csv,092_R1_001.extract.cluster_quality.csv,093_R1_001.extract.cluster_cluster.csv,093_R1_001.extract.cluster_quality.csv,094_R1_001.extract.cluster_cluster.csv,094_R1_001.extract.cluster_quality.csv,095_R1_001.extract.cluster_cluster.csv,095_R1_001.extract.cluster_quality.csv,096_R1_001.extract.cluster_cluster.csv,096_R1_001.extract.cluster_quality.csv,097_R1_001.extract.cluster_cluster.csv,097_R1_001.extract.cluster_quality.csv,098_R1_001.extract.cluster_cluster.csv,098_R1_001.extract.cluster_quality.csv,099_R1_001.extract.cluster_cluster.csv,099_R1_001.extract.cluster_quality.csv,100_R1_001.extract.cluster_cluster.csv,100_R1_001.extract.cluster_quality.csv,101_R1_001.extract.cluster_cluster.csv,101_R1_001.extract.cluster_quality.csv,102_R1_001.extract.cluster_cluster.csv,102_R1_001.extract.cluster_quality.csv,103_R1_001.extract.cluster_cluster.csv,103_R1_001.extract.cluster_quality.csv,104_R1_001.extract.cluster_cluster.csv,104_R1_001.extract.cluster_quality.csv,105_R1_001.extract.cluster_cluster.csv,105_R1_001.extract.cluster_quality.csv,106_R1_001.extract.cluster_cluster.csv,106_R1_001.extract.cluster_quality.csv,107_R1_001.extract.cluster_cluster.csv,107_R1_001.extract.cluster_quality.csv,108_R1_001.extract.cluster_cluster.csv,108_R1_001.extract.cluster_quality.csv,148_R1_001.extract.cluster_cluster.csv,148_R1_001.extract.cluster_quality.csv -o oe_gm17_ov744 -c 1 &> bartender_combiner.log
