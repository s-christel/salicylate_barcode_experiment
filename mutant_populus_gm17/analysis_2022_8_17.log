mkdir R2
mv *_R2_* R2/
//bartender uses only one read

for f in *.fastq; do echo $f >> read_numbers.txt; less $f | grep "@" | wc -l >> read_numbers.txt; done
//take read numbers from txt and add to meta_samples.csv

//BARTENDER analysis (https://github.com/LaoZZZZZ/bartender-1.1)
for f in *.fastq; do bartender_extractor_com -f $f -o $(basename $f .fastq).extract -p TCTCT[20]CGTAC -d both -q ?; printf "\n\n"; done &> bartender_extractor.log

for f in *extract_barcode.txt; do bartender_single_com -f $f -o $(basename $f _barcode.txt).cluster; printf "\n\n"; done &> bartender_single_com.log

mkdir extracts
mv *.txt extracts/
mv *_barcode.csv extracts/

//in the following be sure to list parameters in the order of the samples! i.e. 1,2,3,... not 1,10,2,... and DO NOT USE SPACES BETWEEN THE FILES, ONLY COMMAS
bartender_combiner_com -f 037_R1_001.extract.cluster_cluster.csv,037_R1_001.extract.cluster_quality.csv,038_R1_001.extract.cluster_cluster.csv,038_R1_001.extract.cluster_quality.csv,039_R1_001.extract.cluster_cluster.csv,039_R1_001.extract.cluster_quality.csv,040_R1_001.extract.cluster_cluster.csv,040_R1_001.extract.cluster_quality.csv,041_R1_001.extract.cluster_cluster.csv,041_R1_001.extract.cluster_quality.csv,042_R1_001.extract.cluster_cluster.csv,042_R1_001.extract.cluster_quality.csv,043_R1_001.extract.cluster_cluster.csv,043_R1_001.extract.cluster_quality.csv,044_R1_001.extract.cluster_cluster.csv,044_R1_001.extract.cluster_quality.csv,045_R1_001.extract.cluster_cluster.csv,045_R1_001.extract.cluster_quality.csv,046_R1_001.extract.cluster_cluster.csv,046_R1_001.extract.cluster_quality.csv,047_R1_001.extract.cluster_cluster.csv,047_R1_001.extract.cluster_quality.csv,048_R1_001.extract.cluster_cluster.csv,048_R1_001.extract.cluster_quality.csv,049_R1_001.extract.cluster_cluster.csv,049_R1_001.extract.cluster_quality.csv,050_R1_001.extract.cluster_cluster.csv,050_R1_001.extract.cluster_quality.csv,051_R1_001.extract.cluster_cluster.csv,051_R1_001.extract.cluster_quality.csv,052_R1_001.extract.cluster_cluster.csv,052_R1_001.extract.cluster_quality.csv,053_R1_001.extract.cluster_cluster.csv,053_R1_001.extract.cluster_quality.csv,054_R1_001.extract.cluster_cluster.csv,054_R1_001.extract.cluster_quality.csv,055_R1_001.extract.cluster_cluster.csv,055_R1_001.extract.cluster_quality.csv,056_R1_001.extract.cluster_cluster.csv,056_R1_001.extract.cluster_quality.csv,057_R1_001.extract.cluster_cluster.csv,057_R1_001.extract.cluster_quality.csv,058_R1_001.extract.cluster_cluster.csv,058_R1_001.extract.cluster_quality.csv,059_R1_001.extract.cluster_cluster.csv,059_R1_001.extract.cluster_quality.csv,060_R1_001.extract.cluster_cluster.csv,060_R1_001.extract.cluster_quality.csv,061_R1_001.extract.cluster_cluster.csv,061_R1_001.extract.cluster_quality.csv,062_R1_001.extract.cluster_cluster.csv,062_R1_001.extract.cluster_quality.csv,063_R1_001.extract.cluster_cluster.csv,063_R1_001.extract.cluster_quality.csv,064_R1_001.extract.cluster_cluster.csv,064_R1_001.extract.cluster_quality.csv,065_R1_001.extract.cluster_cluster.csv,065_R1_001.extract.cluster_quality.csv,066_R1_001.extract.cluster_cluster.csv,066_R1_001.extract.cluster_quality.csv,067_R1_001.extract.cluster_cluster.csv,067_R1_001.extract.cluster_quality.csv,068_R1_001.extract.cluster_cluster.csv,068_R1_001.extract.cluster_quality.csv,069_R1_001.extract.cluster_cluster.csv,069_R1_001.extract.cluster_quality.csv,070_R1_001.extract.cluster_cluster.csv,070_R1_001.extract.cluster_quality.csv,071_R1_001.extract.cluster_cluster.csv,071_R1_001.extract.cluster_quality.csv,072_R1_001.extract.cluster_cluster.csv,072_R1_001.extract.cluster_quality.csv,147_R1_001.extract.cluster_cluster.csv,147_R1_001.extract.cluster_quality.csv -o oe22_gm17 -c 1 &> bartender_combiner.log
